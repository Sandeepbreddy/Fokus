<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fokus - Settings</title>
    <link rel="stylesheet" href="options.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Fokus Settings</h1>
            <p>Configure your content blocking preferences</p>
        </div>

        <!-- Statistics Overview -->
        <div class="card stats-overview">
            <h3>Protection Statistics</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="total-blocks">0</div>
                    <div class="stat-label">Total Blocks</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="domains-blocked">0</div>
                    <div class="stat-label">Domains Blocked</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="keywords-blocked">0</div>
                    <div class="stat-label">Keywords Blocked</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="time-saved">0h</div>
                    <div class="stat-label">Time Saved</div>
                </div>
            </div>
        </div>

        <div class="settings-grid">
            <!-- Blocked Keywords -->
            <div class="card">
                <div class="card-body">
                    <h3>Blocked Keywords</h3>

                    <div class="form-group">
                        <label for="new-keyword">Add New Keyword:</label>
                        <input type="text" id="new-keyword" placeholder="Enter keyword to block">
                    </div>
                    <button class="btn btn-primary" id="add-keyword">ADD</button>

                    <div class="list-container" id="keywords-list">
                        <div class="loading">Loading keywords...</div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" id="reset-keywords">RESET</button>
                        <button class="btn btn-danger" id="clear-keywords">CLEAR ALL</button>
                    </div>
                </div>
            </div>

            <!-- Custom Domains -->
            <div class="card">
                <div class="card-body">
                    <h3>Custom Blocked Domains</h3>

                    <div class="form-group">
                        <label for="new-domain">Add New Domain:</label>
                        <input type="text" id="new-domain" placeholder="example.com">
                    </div>
                    <button class="btn btn-primary" id="add-domain">ADD</button>

                    <div class="list-container" id="domains-list">
                        <div class="loading">Loading domains...</div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-danger" id="clear-domains">CLEAR ALL</button>
                    </div>
                </div>
            </div>

            <!-- Blocklist Management -->
            <div class="card">
                <div class="card-body">
                    <h3>Blocklist Sources</h3>
                    <p class="description">Manage multiple GitHub blocklist sources. The extension automatically
                        combines all enabled lists.</p>

                    <button class="btn btn-primary" id="add-blocklist-btn">ADD SOURCE</button>

                    <div class="list-container" id="blocklists-container">
                        <div class="loading">Loading blocklist sources...</div>
                    </div>

                    <!-- Blocklist Controls -->
                    <div class="controls-section">
                        <div class="info-row">
                            <span>Last Update:</span>
                            <span id="last-update">Never</span>
                        </div>

                        <div class="progress-bar" id="update-progress" style="display: none;">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>

                        <div class="btn-group">
                            <button class="btn btn-success" id="force-update">UPDATE ALL</button>
                            <button class="btn btn-info" id="view-blocked-count">STATISTICS</button>
                            <button class="btn btn-secondary" id="test-blocklist-url">TEST URL</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Local Backup & Restore -->
            <div class="card">
                <div class="card-body">
                    <h3>Local Backup & Restore</h3>
                    <p class="description">Export your settings for backup or import settings from another device.</p>

                    <div class="btn-group">
                        <button class="btn btn-primary" id="export-settings">EXPORT</button>
                        <button class="btn btn-secondary" id="import-btn">IMPORT</button>
                        <input type="file" id="import-file" style="display: none;" accept=".json">
                    </div>

                    <div id="backup-message"></div>

                    <div class="warning-box">
                        <h5>Danger Zone</h5>
                        <p>This will restore all settings to default values and cannot be undone.</p>
                        <button class="btn btn-danger" id="reset-all">RESET ALL</button>
                    </div>
                </div>
            </div>

            <!-- Extension Status -->
            <div class="card">
                <div class="card-body">
                    <h3>Extension Status</h3>

                    <div class="status-section">
                        <div class="status-row">
                            <span>Protection Status:</span>
                            <span id="protection-status" class="status-active">Active</span>
                        </div>
                        <div class="status-row">
                            <span>Version:</span>
                            <span>Fokus v1.0.0</span>
                        </div>
                        <div class="status-row">
                            <span>Browser:</span>
                            <span id="browser-info">Detecting...</span>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-info" id="test-blocking">TEST</button>
                        <button class="btn btn-secondary" id="view-logs">VIEW LOGS</button>
                    </div>
                </div>
            </div>

            <!-- Advanced Settings -->
            <div class="card">
                <div class="card-body">
                    <h3>Advanced Settings</h3>

                    <!-- PIN Protection -->
                    <div class="section">
                        <h4>PIN Protection</h4>
                        <div class="info-box">
                            <p><strong>Default PIN is 1234</strong></p>
                            <small>If extension is uninstalled, PIN defaults to 1234.</small>
                        </div>

                        <div class="pin-section">
                            <h5>Change Your PIN</h5>

                            <div class="form-group">
                                <label for="current-pin">Current PIN:</label>
                                <input type="password" id="current-pin" placeholder="Enter current PIN" maxlength="6">
                            </div>

                            <div class="form-group">
                                <label for="new-pin">New PIN:</label>
                                <input type="password" id="new-pin" placeholder="Enter new PIN (4-6 digits)"
                                    maxlength="6">
                                <small>Recommended: Use 4-6 digits that you can remember easily</small>
                            </div>

                            <div class="form-group">
                                <label for="confirm-pin">Confirm New PIN:</label>
                                <input type="password" id="confirm-pin" placeholder="Confirm new PIN" maxlength="6">
                            </div>

                            <div class="btn-group">
                                <button class="btn btn-primary" id="change-pin">CHANGE</button>
                                <button class="btn btn-secondary" id="reset-to-default">RESET</button>
                            </div>

                            <div id="pin-message"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Fokus helps you maintain productivity and focus by blocking distracting content.</p>
            <p class="small">
                Remember: No extension can prevent being disabled through browser settings. True focus comes from
                within.
            </p>
        </div>
    </div>

    <!-- Add Blocklist Modal -->
    <div class="modal-overlay" id="add-blocklist-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Add New Blocklist Source</h5>
                <button class="modal-close" id="close-blocklist-modal">&times;</button>
            </div>

            <div class="modal-body">
                <div class="form-group">
                    <label for="modal-blocklist-name">Name:</label>
                    <input type="text" id="modal-blocklist-name" placeholder="e.g., Custom Adult Blocklist">
                </div>

                <div class="form-group">
                    <label for="modal-blocklist-url">GitHub Raw URL:</label>
                    <input type="url" id="modal-blocklist-url" placeholder="https://raw.githubusercontent.com/...">
                    <small>Must be a valid GitHub raw URL</small>
                </div>

                <div class="form-group">
                    <label for="modal-blocklist-description">Description (optional):</label>
                    <input type="text" id="modal-blocklist-description"
                        placeholder="Brief description of this blocklist">
                </div>

                <button class="btn btn-info" id="test-modal-url">TEST URL</button>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-blocklist">CANCEL</button>
                <button class="btn btn-primary" id="submit-blocklist">ADD SOURCE</button>
            </div>
        </div>
    </div>

    <script src="options-core.js"></script>
    <script src="options.js"></script>
</body>

</html>